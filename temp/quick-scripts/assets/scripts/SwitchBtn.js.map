{"version":3,"sources":["SwitchBtn.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["import { CharacterMgr } from \"./CharacterMgr\";\r\n// let record = null;\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SwitchBtn extends cc.Component {\r\n\r\n  @property(cc.Button)\r\n  rightButton: cc.Button = null;\r\n\r\n  @property(cc.Label)\r\n  rightLabel: cc.Label = null;\r\n\r\n  @property(cc.Button)\r\n  leftButton: cc.Button = null;\r\n\r\n  @property(cc.Label)\r\n  leftLabel: cc.Label = null;\r\n\r\n  @property(CharacterMgr)\r\n  characterMgr: CharacterMgr = null;\r\n\r\n  \r\n  // LIFE-CYCLE CALLBACKS:\r\n\r\n  onLoad () {\r\n    // record = cc.find(\"record\").getComponent(\"record\");\r\n  }\r\n\r\n  start () {\r\n    let turnRightHandler = new cc.Component.EventHandler();\r\n    turnRightHandler.target = this.node;\r\n    turnRightHandler.component = \"SwitchBtn\";\r\n    turnRightHandler.handler = \"turnRight\";\r\n    turnRightHandler.customEventData = this.rightLabel.string;\r\n    this.rightButton.clickEvents.push(turnRightHandler);\r\n\r\n\r\n    let turnLeftHandler = new cc.Component.EventHandler();\r\n    turnLeftHandler.target = this.node;\r\n    turnLeftHandler.component = \"SwitchBtn\";\r\n    turnLeftHandler.handler = \"turnLeft\";\r\n    turnLeftHandler.customEventData = this.leftLabel.string;\r\n    this.leftButton.clickEvents.push(turnLeftHandler);\r\n  }\r\n\r\n  turnRight(event, customEventData) {\r\n    const parentName = this.node.parent.name;\r\n    if (parentName === 'Character') {\r\n      if (customEventData === 'turnRight') {\r\n        this.characterMgr.selectSkinIndex += 1;\r\n        if (this.characterMgr.selectSkinIndex > this.characterMgr.skinCategory.length - 1) {\r\n          this.characterMgr.selectSkinIndex = 0;\r\n        }\r\n      }\r\n      this.seleteSkinCategory();\r\n    }\r\n    if (parentName === 'Bomb') {\r\n      if (customEventData === 'turnRight') {\r\n        this.characterMgr.selectBombIndex += 1;\r\n        if (this.characterMgr.selectBombIndex > this.characterMgr.bombCategory.length - 1) {\r\n          this.characterMgr.selectBombIndex = 0;\r\n        }\r\n      }\r\n      this.seleteBombCategory();\r\n    }\r\n  }\r\n\r\n  turnLeft(event, customEventData) {\r\n    const parentName = this.node.parent.name;\r\n\r\n    if (parentName === 'Character') {\r\n      if (customEventData === 'turnLeft') {\r\n        this.characterMgr.selectSkinIndex -= 1;\r\n        if (this.characterMgr.selectSkinIndex < 0) {\r\n          this.characterMgr.selectSkinIndex = this.characterMgr.skinCategory.length - 1;\r\n        }\r\n      }\r\n      this.seleteSkinCategory();\r\n    }\r\n    if (parentName === 'Bomb') {\r\n      if (customEventData === 'turnLeft') {\r\n        this.characterMgr.selectBombIndex -= 1;\r\n        if (this.characterMgr.selectBombIndex < 0) {\r\n          this.characterMgr.selectBombIndex = this.characterMgr.bombCategory.length - 1;\r\n        }\r\n      }\r\n      this.seleteBombCategory();\r\n    }\r\n  }\r\n\r\n  seleteSkinCategory() {\r\n    const categoryName = this.characterMgr.skinCategory[this.characterMgr.selectSkinIndex];\r\n    this.characterMgr.skinCategory.forEach(allCategoryName => {\r\n      cc.find(`Canvas/Character/${allCategoryName}`).active = false;\r\n      if (allCategoryName === categoryName) {\r\n        const userSkinCategory = cc.find(`Canvas/Character/${categoryName}`);\r\n        userSkinCategory.active = true; // 把現在樣式打開\r\n        this.characterMgr.skinColor.forEach(color => {\r\n          userSkinCategory.getChildByName(color).active = false; // 把所有color都關掉\r\n        });\r\n        userSkinCategory.getChildByName(this.characterMgr.currentSkinColor).active = true; // 把現在的顏色打開\r\n      }\r\n    });\r\n    \r\n    this.characterMgr.skinAvailable = false;\r\n    this.characterMgr.userSkinCategory.forEach(userCategoryIndex => {\r\n      if (this.characterMgr.selectSkinIndex === userCategoryIndex) {\r\n        this.characterMgr.skinAvailable = true;\r\n      }\r\n    });\r\n    \r\n    console.log(this.characterMgr.skinAvailable);\r\n    \r\n    if (this.characterMgr.skinAvailable === false) {\r\n      console.log('灰色');\r\n    //   // cc.find(`Canvas/Bomb/${categoryName}/${categoryName}`).active = false; // 把彩色樣式關閉\r\n    //   // cc.find(`Canvas/Bomb/${categoryName}/dis${categoryName}`).active = true; // 把灰色樣式打開\r\n    }\r\n    this.characterMgr.result();\r\n  }\r\n\r\n  seleteBombCategory() {\r\n    const categoryName = this.characterMgr.bombCategory[this.characterMgr.selectBombIndex];\r\n    \r\n    this.characterMgr.bombCategory.forEach(category => {\r\n      cc.find(`Canvas/Bomb/${category}/${category}`).active = false; // 把全部彩色樣式關閉\r\n      cc.find(`Canvas/Bomb/${category}/dis${category}`).active = false; // 把全部灰色樣式關閉\r\n      if (category === categoryName) {\r\n        cc.find(`Canvas/Bomb/${categoryName}/${categoryName}`).active = true; // 把現在樣式打開\r\n      }\r\n    });\r\n\r\n    this.characterMgr.bombAvailable = false;\r\n    this.characterMgr.userBombCategory.forEach(userCategoryIndex => {\r\n      if (this.characterMgr.selectBombIndex === userCategoryIndex) {\r\n        this.characterMgr.bombAvailable = true;\r\n      }\r\n    });\r\n\r\n    console.log(this.characterMgr.bombAvailable);\r\n    \r\n    if (this.characterMgr.bombAvailable === false) {\r\n      cc.find(`Canvas/Bomb/${categoryName}/${categoryName}`).active = false; // 把彩色樣式關閉\r\n      cc.find(`Canvas/Bomb/${categoryName}/dis${categoryName}`).active = true; // 把灰色樣式打開\r\n    }\r\n\r\n    this.characterMgr.result();\r\n  }\r\n\r\n  // update (dt) {}\r\n}\r\n"]}
{"version":3,"sources":["SwitchBtn.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["import { CharacterMgr } from \"./CharacterMgr\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SwitchBtn extends cc.Component {\r\n\r\n  @property(cc.Button)\r\n  rightButton: cc.Button = null;\r\n\r\n  @property(cc.Label)\r\n  rightLabel: cc.Label = null;\r\n\r\n  @property(cc.Button)\r\n  leftButton: cc.Button = null;\r\n\r\n  @property(cc.Label)\r\n  leftLabel: cc.Label = null;\r\n\r\n  @property(CharacterMgr)\r\n  characterMgr: CharacterMgr = null;\r\n\r\n  \r\n  // LIFE-CYCLE CALLBACKS:\r\n\r\n  // onLoad () {}\r\n\r\n  start () {\r\n    let turnRightHandler = new cc.Component.EventHandler();\r\n    turnRightHandler.target = this.node;\r\n    turnRightHandler.component = \"SwitchBtn\";\r\n    turnRightHandler.handler = \"turnRight\";\r\n    turnRightHandler.customEventData = this.rightLabel.string;\r\n    this.rightButton.clickEvents.push(turnRightHandler);\r\n\r\n\r\n    let turnLeftHandler = new cc.Component.EventHandler();\r\n    turnLeftHandler.target = this.node;\r\n    turnLeftHandler.component = \"SwitchBtn\";\r\n    turnLeftHandler.handler = \"turnLeft\";\r\n    turnLeftHandler.customEventData = this.leftLabel.string;\r\n    this.leftButton.clickEvents.push(turnLeftHandler);\r\n\r\n  }\r\n\r\n  turnRight(event, customEventData) {\r\n    console.log(customEventData);\r\n    if (customEventData === 'turnRight') {\r\n      this.characterMgr.selectNum += 1;\r\n      if (this.characterMgr.selectNum > this.characterMgr.skinCategory.length - 1) {\r\n        this.characterMgr.selectNum = 0;\r\n      }\r\n    }\r\n    this.seleteCategory();\r\n  }\r\n\r\n  turnLeft(event, customEventData) {\r\n    console.log(customEventData);\r\n    if (customEventData === 'turnLeft') {\r\n      this.characterMgr.selectNum -= 1;\r\n      if (this.characterMgr.selectNum < 0) {\r\n        this.characterMgr.selectNum = this.characterMgr.skinCategory.length - 1;\r\n      }\r\n    }\r\n    this.seleteCategory();\r\n  }\r\n\r\n  seleteCategory() {\r\n    const categoryName = this.characterMgr.skinCategory[this.characterMgr.selectNum];\r\n    console.log(this.characterMgr.selectNum, ':' , categoryName);\r\n\r\n    this.characterMgr.skinCategory.forEach(category => {\r\n      cc.find(`Canvas/Character/${category}`).active = false;\r\n      if (category === categoryName) {\r\n        this.characterMgr.currentSkinCategory = categoryName; // 確定現在的樣式\r\n        const skinCategory = cc.find(`Canvas/Character/${this.characterMgr.currentSkinCategory}`);\r\n        skinCategory.active = true; // 把現在樣式打開\r\n        this.characterMgr.skinColor.forEach(color => {\r\n          skinCategory.getChildByName(color).active = false; // 把所有color都關掉\r\n        });\r\n        skinCategory.getChildByName(this.characterMgr.currentSkinColor).active = true; // 把現在的顏色打開\r\n      }\r\n    });\r\n    this.characterMgr.result();\r\n  }\r\n\r\n  // update (dt) {}\r\n}\r\n"]}
{"version":3,"sources":["SwitchBtn.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["import { CharacterMgr } from \"./CharacterMgr\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SwitchBtn extends cc.Component {\r\n\r\n  @property(cc.Button)\r\n  rightButton: cc.Button = null;\r\n\r\n  @property(cc.Label)\r\n  rightLabel: cc.Label = null;\r\n\r\n  @property(cc.Button)\r\n  leftButton: cc.Button = null;\r\n\r\n  @property(cc.Label)\r\n  leftLabel: cc.Label = null;\r\n\r\n  @property(CharacterMgr)\r\n  characterMgr: CharacterMgr = null;\r\n\r\n  \r\n  // LIFE-CYCLE CALLBACKS:\r\n\r\n  // onLoad () {}\r\n\r\n  start () {\r\n    let turnRightHandler = new cc.Component.EventHandler();\r\n    turnRightHandler.target = this.node;\r\n    turnRightHandler.component = \"SwitchBtn\";\r\n    turnRightHandler.handler = \"turnRight\";\r\n    turnRightHandler.customEventData = this.rightLabel.string;\r\n    this.rightButton.clickEvents.push(turnRightHandler);\r\n\r\n\r\n    let turnLeftHandler = new cc.Component.EventHandler();\r\n    turnLeftHandler.target = this.node;\r\n    turnLeftHandler.component = \"SwitchBtn\";\r\n    turnLeftHandler.handler = \"turnLeft\";\r\n    turnLeftHandler.customEventData = this.leftLabel.string;\r\n    this.leftButton.clickEvents.push(turnLeftHandler);\r\n\r\n  }\r\n\r\n  turnRight(event, customEventData) {\r\n    const parentName = this.node.parent.name;\r\n\r\n    if (parentName === 'Character') {\r\n      if (customEventData === 'turnRight') {\r\n        this.characterMgr.selectSkinIndex += 1;\r\n        if (this.characterMgr.selectSkinIndex > this.characterMgr.userSkinCategory.length - 1) {\r\n          this.characterMgr.selectSkinIndex = 0;\r\n        }\r\n      }\r\n      this.seleteSkinCategory();\r\n    }\r\n    if (parentName === 'Bomb') {\r\n      if (customEventData === 'turnRight') {\r\n        this.characterMgr.selectBombIndex += 1;\r\n        if (this.characterMgr.selectBombIndex > this.characterMgr.userBombCategory.length - 1) {\r\n          this.characterMgr.selectBombIndex = 0;\r\n        }\r\n      }\r\n      this.seleteBombCategory();\r\n    }\r\n  }\r\n\r\n  turnLeft(event, customEventData) {\r\n    const parentName = this.node.parent.name;\r\n\r\n    if (parentName === 'Character') {\r\n      if (customEventData === 'turnLeft') {\r\n        this.characterMgr.selectSkinIndex -= 1;\r\n        if (this.characterMgr.selectSkinIndex < 0) {\r\n          this.characterMgr.selectSkinIndex = this.characterMgr.userSkinCategory.length - 1;\r\n        }\r\n      }\r\n      this.seleteSkinCategory();\r\n    }\r\n    if (parentName === 'Bomb') {\r\n      if (customEventData === 'turnLeft') {\r\n        this.characterMgr.selectBombIndex -= 1;\r\n        if (this.characterMgr.selectBombIndex < 0) {\r\n          this.characterMgr.selectBombIndex = this.characterMgr.userBombCategory.length - 1;\r\n        }\r\n      }\r\n      this.seleteBombCategory();\r\n    }\r\n  }\r\n\r\n  seleteSkinCategory() {\r\n    const categoryName = this.characterMgr.userSkinCategory[this.characterMgr.selectSkinIndex];\r\n    // console.log(this.characterMgr.selectSkinIndex, ':' , categoryName);\r\n\r\n    this.characterMgr.userSkinCategory.forEach(category => {\r\n      cc.find(`Canvas/Character/${category}`).active = false;\r\n      if (category === categoryName) {\r\n        this.characterMgr.currentSkinCategory = categoryName; // 確定現在的樣式\r\n        const userSkinCategory = cc.find(`Canvas/Character/${this.characterMgr.currentSkinCategory}`);\r\n        userSkinCategory.active = true; // 把現在樣式打開\r\n        this.characterMgr.skinColor.forEach(color => {\r\n          userSkinCategory.getChildByName(color).active = false; // 把所有color都關掉\r\n        });\r\n        userSkinCategory.getChildByName(this.characterMgr.currentSkinColor).active = true; // 把現在的顏色打開\r\n      }\r\n    });\r\n    this.characterMgr.result();\r\n  }\r\n\r\n  seleteBombCategory() {\r\n    const categoryName = this.characterMgr.userBombCategory[this.characterMgr.selectBombIndex];\r\n    // console.log(this.characterMgr.selectBombIndex, ':' , categoryName);\r\n\r\n    this.characterMgr.userBombCategory.forEach(category => {\r\n      cc.find(`Canvas/Bomb/${category}`).active = false;\r\n      if (category === categoryName) {\r\n        this.characterMgr.currentBombCategory = categoryName; // 確定現在的樣式\r\n        const userBombCategory = cc.find(`Canvas/Bomb/${this.characterMgr.currentBombCategory}`);\r\n        userBombCategory.active = true; // 把現在樣式打開\r\n      }\r\n    });\r\n    this.characterMgr.result();\r\n  }\r\n\r\n  // update (dt) {}\r\n}\r\n"]}
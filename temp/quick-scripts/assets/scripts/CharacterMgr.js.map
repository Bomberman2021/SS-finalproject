{"version":3,"sources":["CharacterMgr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["import SwitchBtn from \"./SwitchBtn\";\r\n\r\nlet record = null;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport class CharacterMgr extends cc.Component {\r\n\r\n  @property(cc.Node)\r\n  done: cc.Node = null;\r\n  \r\n  public skinColor: string[] = \r\n    ['black', 'blue', 'red', 'white']; // 全4種\r\n  public skinCategory: string[] = \r\n    ['normal', 'boxer', 'brucelee', 'bullman', 'caveman',\r\n     'ebifry', 'egypt', 'mexican', 'ninja', 'pirate', 'russian']; // 全11種\r\n  public bombCategory: string[] = \r\n    ['normal', 'bomb1', 'bomb2', 'bomb3', 'bomb4']; // 全5種\r\n  \r\n  public currentSkinColor: string = 'black';\r\n  // skinCategory[selectSkinIndex] = 0;\r\n  // bombCategory[selectBombIndex] = 0;\r\n\r\n  public skinColorTable: object = {};\r\n\r\n  public selectSkinIndex:number = 0;\r\n  public selectBombIndex:number = 0;\r\n\r\n  public skinAvailable = false;\r\n  public bombAvailable = false;\r\n\r\n  public userSkinCategory: number[] = [];\r\n  public userBombCategory: number[] = [];\r\n\r\n  onLoad () {\r\n    record = cc.find(\"record\").getComponent(\"record\");\r\n    this.init();\r\n\r\n    console.log('record.currentPlayer:', record.currentPlayer);\r\n    \r\n\r\n    if (record.currentPlayer === 'Player1') {\r\n      this.currentSkinColor = record.player1Color;\r\n      this.selectSkinIndex = record.player1Skin;\r\n      this.selectBombIndex = record.player1Bomb;\r\n    }\r\n\r\n    if (record.currentPlayer === 'Player2') {\r\n      this.currentSkinColor = record.player2Color;\r\n      this.selectSkinIndex = record.player2Skin;\r\n      this.selectBombIndex = record.player2Bomb;\r\n    }\r\n    cc.find(`Canvas/Character/normal`).active = false; // 先把預設圖拿掉\r\n    let skinCategoryNode = cc.find(`Canvas/Character/${this.skinCategory[this.selectSkinIndex]}`);\r\n    skinCategoryNode.active = true;\r\n    skinCategoryNode.getChildByName(this.currentSkinColor).active = true;\r\n\r\n    cc.find(`Canvas/Bomb/normal/normal`).active = false; // 先把預設圖拿掉\r\n    let bombCategoryNode = cc.find(`Canvas/Bomb/${this.bombCategory[this.selectBombIndex]}/${this.bombCategory[this.selectBombIndex]}`);\r\n    bombCategoryNode.active = true;\r\n  }\r\n\r\n  start () {\r\n  }\r\n\r\n  init() {\r\n    this.skinAvailable = true;\r\n    this.bombAvailable = true;\r\n\r\n    this.userSkinCategory = record.userSkinCategory;\r\n    this.userBombCategory = record.userBombCategory;\r\n\r\n    console.log('userSkinCategory',this.userSkinCategory);\r\n    console.log('userBombCategory',this.userBombCategory); // Index\r\n  }\r\n\r\n  // update (dt) {}\r\n\r\n  result() {\r\n    if (this.skinAvailable && this.bombAvailable) {\r\n      this.done.getComponent(\"LoadSceneBtn\").doneOpen();\r\n    } else {\r\n      this.done.getComponent(\"LoadSceneBtn\").doneClose();\r\n    }\r\n    console.log('---------------');\r\n    console.log('color:', this.currentSkinColor);\r\n    console.log('skin:', this.selectSkinIndex);\r\n    console.log('bomb：', this.selectBombIndex);\r\n    console.log('---------------');\r\n  }\r\n}\r\n"]}
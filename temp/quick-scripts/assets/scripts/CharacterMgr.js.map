{"version":3,"sources":["CharacterMgr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["import { UserInfo } from \"./UserInfo\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport class CharacterMgr extends cc.Component {\r\n  \r\n  public skinColor: string[] = \r\n    ['black', 'blue', 'red', 'white']; // 全4種\r\n  public skinCategory: string[] = \r\n    ['normal', 'pirate', 'russian', 'boxer', 'brucelee', 'bullman', \r\n    'caveman', 'cowboy', 'ebifry', 'egypt', 'mexican', 'ninja']; // 全12種\r\n  public bombCategory: string[] = \r\n    ['normal', 'bomb_icon_01', 'bomb_icon_02', 'bomb_icon_03',\r\n     'bomb_icon_04', 'bomb1', 'bomb2', 'bomb3', 'bomb4']; // 全9種\r\n  \r\n  public currentSkinColor: string = 'black';\r\n  public currentSkinCategory: string = 'normal';\r\n  public currentBombCategory: string = 'normal';\r\n\r\n  public skinColorTable: object = {};\r\n\r\n  public selectSkinIndex:number = 0;\r\n  public selectBombIndex:number = 0;\r\n\r\n  @property(UserInfo)\r\n  userInfo: UserInfo = null;\r\n\r\n  public userSkinCategory: string[] = this.skinCategory;\r\n  public userBombCategory: string[] = this.bombCategory;\r\n\r\n  onLoad () {\r\n    this.init();\r\n\r\n    cc.find(`Canvas/Character/normal`).active = false; // 先把預設圖拿掉\r\n    let skinCategoryNode = cc.find(`Canvas/Character/${this.currentSkinCategory}`);\r\n    skinCategoryNode.active = true;\r\n    skinCategoryNode.getChildByName(this.currentSkinColor).active = true;\r\n\r\n    cc.find(`Canvas/Bomb/normal`).active = false; // 先把預設圖拿掉\r\n    let bombCategoryNode = cc.find(`Canvas/Bomb/${this.currentBombCategory}`);\r\n    bombCategoryNode.active = true;\r\n  }\r\n\r\n  start () {\r\n\r\n  }\r\n\r\n  init() {\r\n    const skinIndexArray = (window as any).userSkinCategory;\r\n    const bombIndexArray = (window as any).userBombCategory;\r\n\r\n    console.log('skinIndexArray:', skinIndexArray);\r\n    console.log('bombIndexArray:', bombIndexArray);\r\n    \r\n    if ((window as any).currentPlayer) { // 有登入時\r\n      this.userSkinCategory = []; // 把它清空\r\n      this.userBombCategory = []; // 把它清空\r\n\r\n      this.skinCategory.forEach(category => {\r\n        skinIndexArray.forEach(theIndex => {\r\n          const has = this.skinCategory[theIndex];\r\n          if (category === has) {\r\n            console.log(has);\r\n            this.userSkinCategory.push(has);\r\n          }\r\n        });\r\n      });\r\n\r\n      this.bombCategory.forEach(category => {\r\n        bombIndexArray.forEach(theIndex => {\r\n          const has = this.bombCategory[theIndex];\r\n          if (category === has) {\r\n            console.log(has);\r\n            this.userBombCategory.push(has);\r\n          }\r\n        });\r\n      });\r\n    }\r\n    console.log('userSkinCategory',this.userSkinCategory);\r\n    console.log('userBombCategory',this.userBombCategory);\r\n  }\r\n\r\n  // update (dt) {}\r\n\r\n  result() {\r\n    console.log('---------------');\r\n    console.log('color:', this.currentSkinColor );\r\n    console.log('skin:', this.currentSkinCategory , 'index:' , this.selectSkinIndex);\r\n    console.log('bomb：', this.currentBombCategory , 'index:' , this.selectBombIndex);\r\n    console.log('---------------');\r\n  }\r\n}\r\n"]}
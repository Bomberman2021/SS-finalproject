{"version":3,"sources":["LoadSceneBtn.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["import { CharacterMgr } from \"./CharacterMgr\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\nlet record = null;\r\n\r\n@ccclass\r\nexport class LoadSceneBtn extends cc.Component {\r\n\r\n  @property(cc.Button)\r\n  button: cc.Button = null;\r\n\r\n  @property(cc.Label)\r\n  label: cc.Label = null;\r\n\r\n  @property(cc.Node)\r\n  modeBlock: cc.Node = null;\r\n\r\n  @property(cc.Node)\r\n  player2Block: cc.Node = null;\r\n\r\n  @property(CharacterMgr)\r\n  characterMgr: CharacterMgr = null;\r\n\r\n\r\n  // LIFE-CYCLE CALLBACKS:\r\n\r\n  onLoad () {\r\n    record = cc.find(\"record\").getComponent(\"record\");\r\n\r\n    if (record.hasPlayer2) {\r\n      if (this.player2Block && this.modeBlock) { \r\n        this.player2Block.active = true;\r\n        this.modeBlock.active = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  start () {\r\n    let clickEventHandler = new cc.Component.EventHandler();\r\n    clickEventHandler.target = this.node;\r\n    clickEventHandler.component = \"LoadSceneBtn\";\r\n    if (this.label.string === '2P MODE') {\r\n      clickEventHandler.handler = \"twoPeoeleMode\";\r\n    }\r\n    if (this.label.string === 'Player 1') { \r\n      clickEventHandler.handler = \"character\";\r\n    }\r\n    if (this.label.string === 'Player 2') { \r\n      clickEventHandler.handler = \"character\";\r\n    }\r\n    if (this.label.string === 'DONE') {\r\n      // if (3) { // 還沒選好衣服\r\n      //   this.button.interactable = false;\r\n      // }\r\n      clickEventHandler.handler = \"done\";\r\n    }\r\n    \r\n    clickEventHandler.customEventData = this.label.string;\r\n\r\n    let button = this.node.getComponent(cc.Button);\r\n    button.clickEvents.push(clickEventHandler);\r\n  }\r\n\r\n    \r\n  twoPeoeleMode() {\r\n    if (!record.hasPlayer2) {\r\n      this.player2Block.active = true;\r\n      this.modeBlock.active = false;\r\n      record.hasPlayer2 = true;\r\n    }\r\n  }\r\n\r\n  character() {\r\n    if (this.label.string === 'Player 1') {\r\n      record.currentPlayer = 'Player1';      \r\n    }\r\n    if (this.label.string === 'Player 2') {\r\n      record.currentPlayer = 'Player2';\r\n    }\r\n    console.log('LoadSceneBtn:', record.currentPlayer);\r\n    cc.director.loadScene(\"character\");\r\n  }\r\n\r\n  done() {\r\n    if (record.currentPlayer === 'Player1') {\r\n      record.player1Skin = this.characterMgr.currentSkinCategory;\r\n      record.player1Bomb = this.characterMgr.currentBombCategory;\r\n      record.player1Color = this.characterMgr.currentSkinColor;\r\n    }\r\n    if (record.currentPlayer === 'Player2') {\r\n      record.player2Skin = this.characterMgr.currentSkinCategory;\r\n      record.player2Bomb = this.characterMgr.currentBombCategory;\r\n      record.player2Color = this.characterMgr.currentSkinColor;\r\n    }\r\n    console.log('done');\r\n    cc.director.loadScene(\"main\");\r\n  }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}